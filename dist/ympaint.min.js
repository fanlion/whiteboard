window.YMPaintSDK=function(t){var e={};function i(s){if(e[s])return e[s].exports;var o=e[s]={i:s,l:!1,exports:{}};return t[s].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:s})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="./dist",i(i.s=0)}([function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isDebug=!1,e.version="1.0.0";var s=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.setXY=function(t,e){this.x=t,this.y=e},t.prototype.getX=function(){return this.x},t.prototype.setX=function(t){this.x=t},t.prototype.getY=function(){return this.y},t.prototype.setY=function(t){this.y=t},t}(),o=function(){function t(t){this.canvas=t.canvas,this.context=this.canvas.getContext("2d"),this.color=t.color||"black",this.lineWidth=t.lineWidth||2,this.radius=t.radius||0,this.shape=t.shape||"line",this.angle=0,this.range=25,this.points=[],this.storage=new s,this.polygonVertex=[],this.beginPoint=new s,this.stopPoint=new s,this.rect={},this.history={lines:[],rects:[],circles:[],arrows:[]},this.bindEvent(),this.resize()}return t.prototype.handleMouseDown=function(t){var e=t.clientX,i=t.clientY;this.drawing=!0,"rect"===this.shape?(this.rect.x=e,this.rect.y=i):"line"===this.shape?(this.movePoint(e,i),this.drawPoint(this.points,this.lineWidth,this.color)):"circle"===this.shape?this.storage.setXY(e,i):"arrow"===this.shape&&this.beginPoint.setXY(e,i)},t.prototype.handleMouseMove=function(t){if(this.drawing)if("rect"===this.shape)this.rect.width=Math.abs(this.rect.x-t.clientX),this.rect.height=Math.abs(this.rect.y-t.clientY),this.rect.x>t.clientX?this.rect.realX=t.clientX:this.rect.realX=this.rect.x,this.rect.y>t.clientY?this.rect.realY=t.clientY:this.rect.realY=this.rect.y,this.clear(),this.redrawAll(),this.drawRect(this.rect.realX,this.rect.realY,this.rect.width,this.rect.height,this.radius,this.color,this.lineWidth);else if("line"===this.shape)this.movePoint(t.clientX,t.clientY),this.drawPoint(this.points,this.lineWidth,this.color);else if("circle"===this.shape){var e=0,i=0;e=this.storage.getX()>t.clientX?this.storage.getX()-Math.abs(this.storage.getX()-t.clientX)/2:Math.abs(this.storage.getX()-t.clientX)/2+this.storage.getX(),i=this.storage.getY()>t.clientY?this.storage.getY()-Math.abs(this.storage.getY()-t.clientY)/2:Math.abs(this.storage.getY()-t.clientY)/2+this.storage.getY();var s=Math.abs(this.storage.getX()-t.clientX)/2,o=Math.abs(this.storage.getY()-t.clientY)/2;this.clear(),this.redrawAll(),this.drawEllipse(e,i,s,o,this.lineWidth,this.color)}else"arrow"===this.shape&&(this.stopPoint.setXY(t.clientX,t.clientY),this.clear(),this.redrawAll(),this.arrowCoord(this.beginPoint,this.stopPoint,this.range),this.sideCoord(),this.drawArrow(this.color))},t.prototype.handleMouseUp=function(t){if("rect"===this.shape){var e={realX:this.rect.realX,realY:this.rect.realY,width:this.rect.width,height:this.rect.height,radius:this.radius,color:this.color,lineWidth:this.lineWidth};this.rect={},this.history.rects.push(e)}else if("line"===this.shape){var i={points:this.points,lineWidth:this.lineWidth,color:this.color};this.history.lines.push(i),this.points=[]}else if("circle"===this.shape){var o={x:this.storage.getX()>t.clientX?this.storage.getX()-Math.abs(this.storage.getX()-t.clientX)/2:Math.abs(this.storage.getX()-t.clientX)/2+this.storage.getX(),y:this.storage.getY()>t.clientY?this.storage.getY()-Math.abs(this.storage.getY()-t.clientY)/2:Math.abs(this.storage.getY()-t.clientY)/2+this.storage.getY(),a:Math.abs(this.storage.getX()-t.clientX)/2,b:Math.abs(this.storage.getY()-t.clientY)/2,lineWidth:this.lineWidth,color:this.color};this.history.circles.push(o),this.storage=new s}else if("arrow"===this.shape){var h={beginPoint:this.beginPoint,stopPoint:new s(t.clientX,t.clientY),range:this.range,color:this.color};this.history.arrows.push(h),this.beginPoint=new s}this.drawing=!1},t.prototype.movePoint=function(t,e){this.points.push(new s(t,e))},t.prototype.drawPoint=function(t,e,i){for(var s=0;s<t.length;s++)this.context.beginPath(),t[s].getY()&&s?this.context.moveTo(t[s-1].getX(),t[s-1].getY()):this.context.moveTo(t[s].getX()-1,t[s].getY()),this.context.lineWidth=e,this.context.strokeStyle=i,this.context.lineTo(t[s].getX(),t[s].getY()),this.context.closePath(),this.context.stroke()},t.prototype.drawEllipse=function(t,e,i,s,o,h){this.context.beginPath(),this.context.ellipse(t,e,i,s,0,0,2*Math.PI),this.context.lineWidth=o,this.context.fillStyle="rgba(0, 0, 0, 0)",this.context.strokeStyle=h,this.context.fill(),this.context.stroke()},t.prototype.createRect=function(t,e,i,s,o,h,n,r){this.context.beginPath(),this.context.moveTo(t,e+o),this.context.lineTo(t,e+s-o),this.context.quadraticCurveTo(t,e+s,t+o,e+s),this.context.lineTo(t+i-o,e+s),this.context.quadraticCurveTo(t+i,e+s,t+i,e+s-o),this.context.lineTo(t+i,e+o),this.context.quadraticCurveTo(t+i,e,t+i-o,e),this.context.lineTo(t+o,e),this.context.quadraticCurveTo(t,e,t,e+o),this.context[n+"Style"]=h,this.context.lineWidth=r,this.context.closePath(),this.context[n]()},t.prototype.drawRect=function(t,e,i,s,o,h,n){this.createRect(t,e,i,s,o,h,"stroke",n)},t.prototype.getRadian=function(t,e){this.angle=Math.atan2(e.getY()-t.getY(),e.getX()-t.getX())/Math.PI*180},t.prototype.arrowCoord=function(e,i,s){this.polygonVertex[0]=e.getX(),this.polygonVertex[1]=e.getY(),this.polygonVertex[6]=i.getX(),this.polygonVertex[7]=i.getY(),this.getRadian(e,i),this.polygonVertex[8]=i.getX()-t.edgeLen*Math.cos(Math.PI/180*(this.angle+s)),this.polygonVertex[9]=i.getY()-t.edgeLen*Math.sin(Math.PI/180*(this.angle+s)),this.polygonVertex[4]=i.getX()-t.edgeLen*Math.cos(Math.PI/180*(this.angle-s)),this.polygonVertex[5]=i.getY()-t.edgeLen*Math.sin(Math.PI/180*(this.angle-s))},t.prototype.sideCoord=function(){var t=(this.polygonVertex[4]+this.polygonVertex[8])/2,e=(this.polygonVertex[5]+this.polygonVertex[9])/2,i=new s(t,e);this.polygonVertex[2]=(this.polygonVertex[4]+i.getX())/2,this.polygonVertex[3]=(this.polygonVertex[5]+i.getY())/2,this.polygonVertex[10]=(this.polygonVertex[8]+i.getX())/2,this.polygonVertex[11]=(this.polygonVertex[9]+i.getY())/2},t.prototype.drawArrow=function(t){this.context.fillStyle=t,this.context.beginPath(),this.context.moveTo(this.polygonVertex[0],this.polygonVertex[1]),this.context.lineTo(this.polygonVertex[2],this.polygonVertex[3]),this.context.lineTo(this.polygonVertex[4],this.polygonVertex[5]),this.context.lineTo(this.polygonVertex[6],this.polygonVertex[7]),this.context.lineTo(this.polygonVertex[8],this.polygonVertex[9]),this.context.lineTo(this.polygonVertex[10],this.polygonVertex[11]),this.context.closePath(),this.context.fill()},t.prototype.bindEvent=function(){this.canvas.addEventListener("mousedown",this.handleMouseDown.bind(this),!1),this.canvas.addEventListener("mousemove",this.throttle(this.handleMouseMove,10),!1),this.canvas.addEventListener("mouseup",this.handleMouseUp.bind(this),!1)},t.prototype.resize=function(){this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight},t.prototype.redrawAll=function(){console.log("redrawAll: ",this.history);var t=this;this.history.rects.length>0&&this.history.rects.forEach(function(e){t.drawRect(e.realX,e.realY,e.width,e.height,e.radius,e.color,e.lineWidth)}),this.history.lines.length>0&&this.history.lines.forEach(function(e){t.drawPoint(e.points,e.lineWidth,e.color)}),this.history.circles.length>0&&this.history.circles.forEach(function(e){t.drawEllipse(e.x,e.y,e.a,e.b,e.lineWidth,e.color)}),this.history.arrows.length>0&&this.history.arrows.forEach(function(e){t.arrowCoord(e.beginPoint,e.stopPoint,e.range),t.sideCoord(),t.drawArrow(e.color)})},t.prototype.clear=function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.setColor=function(t){this.color=t},t.prototype.getColor=function(){return this.color},t.prototype.setShape=function(t){this.shape=t},t.prototype.getShape=function(){return this.shape},t.prototype.throttle=function(t,e){var i=this,s=(new Date).getTime();return function(){var o=(new Date).getTime();o-s>=e&&(s=o,t.apply(i,arguments))}},t.edgeLen=25,t.angle=15,t}();e.YMPaint=o}]);