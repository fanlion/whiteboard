window["YMPaintSDK"] =
/******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, {
/******/ 				configurable: false,
/******/ 				enumerable: true,
/******/ 				get: getter
/******/ 			});
/******/ 		}
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "./dist";
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = 3);
/******/ })
/************************************************************************/
/******/ ([
/* 0 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 *
 * Shape类型
 * @enum {number}
 */
var ShapeType;
(function (ShapeType) {
    ShapeType["Rectangle"] = "rect";
    ShapeType["Circle"] = "circle";
    ShapeType["Line"] = "line";
    ShapeType["Arrow"] = "arrow";
    ShapeType["Point"] = "point";
    ShapeType["Triangle"] = "triangle";
    ShapeType["Curve"] = "curve";
})(ShapeType || (ShapeType = {}));
exports.ShapeType = ShapeType;
;


/***/ }),
/* 1 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 形状基础类
 *
 * @class ShapeBase
 */
var ShapeBase = /** @class */ (function () {
    function ShapeBase(color, lineWidth, type) {
        if (color === void 0) { color = 'black'; }
        if (lineWidth === void 0) { lineWidth = 0; }
        this.color = color;
        this.lineWidth = lineWidth;
        this.type = type;
    }
    return ShapeBase;
}());
exports.default = ShapeBase;


/***/ }),
/* 2 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
/**
 * 点
 *
 * @class Point
 */
var Point = /** @class */ (function () {
    /**
     * Creates an instance of Point.
     * @param {number} [x=0]
     * @param {number} [y=0]
     * @memberof Point
     */
    function Point(x, y) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        this.x = x;
        this.y = y;
    }
    return Point;
}());
exports.default = Point;


/***/ }),
/* 3 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
exports.isDebug = false;
exports.version = '1.0.0';
var Paint_1 = __webpack_require__(4);
var Point_1 = __webpack_require__(2);
var Circle_1 = __webpack_require__(5);
var Rectangle_1 = __webpack_require__(6);
var Curve_1 = __webpack_require__(7);
var Arrow_1 = __webpack_require__(8);
var Line_1 = __webpack_require__(9);
var Triangle_1 = __webpack_require__(10);
var Types_1 = __webpack_require__(0);
exports.ShapeType = Types_1.ShapeType;
/**
 * YMPaint
 *
 * @export
 * @class YMPaint
 */
var YMPaint = /** @class */ (function () {
    function YMPaint(config, listeners) {
        this.canvas = config.canvas;
        this.paint = new Paint_1.default(this.canvas);
        this.listeners = listeners;
        this.color = config.color || 'black';
        this.lineWidth = config.lineWidth || 2;
        this.radius = config.radius || 0;
        this.shape = config.shape || 'line';
        this.angle = 0;
        this.range = 25;
        this.beginPoint = new Point_1.default();
        this.stopPoint = new Point_1.default();
        this.rect = new Rectangle_1.default();
        this.triangle = new Triangle_1.default();
        this.points = [];
        this.history = [];
        this.record = [];
        // 绑定事件
        this.bindEvent();
    }
    /**
     * 鼠标mousedown事件处理器
     *
     * @private
     * @param {MouseEvent} e
     * @memberof YMPaint
     */
    YMPaint.prototype.handleMouseDown = function (e) {
        var x = e.clientX;
        var y = e.clientY;
        this.drawing = true;
        if (this.shape === 'rect') {
            this.beginPoint.x = x;
            this.beginPoint.y = y;
        }
        else if (this.shape === 'curve') {
            this.points.push(new Point_1.default(x, y));
            this.paint.drawPoint(this.points, this.lineWidth, this.color);
        }
        else if (this.shape === 'circle') {
            this.beginPoint.x = x;
            this.beginPoint.y = y;
        }
        else if (this.shape === 'arrow') {
            this.beginPoint.x = x;
            this.beginPoint.y = y;
        }
        else if (this.shape === 'line') {
            this.beginPoint.x = x;
            this.beginPoint.y = y;
        }
    };
    /**
     * 鼠标mousemove事件处理器
     *
     * @private
     * @param {MouseEvent} e
     * @memberof YMPaint
     */
    YMPaint.prototype.handleMouseMove = function (e) {
        // 鼠标移动回调
        this.listeners && this.listeners.onCursorMoving && this.listeners.onCursorMoving({ x: e.clientX, y: e.clientY });
        if (this.drawing) {
            if (this.shape === Types_1.ShapeType.Rectangle) {
                this.rect.width = Math.abs(this.beginPoint.x - e.clientX);
                this.rect.height = Math.abs(this.beginPoint.y - e.clientY);
                // 确定正确的矩形左上角坐标
                if (this.beginPoint.x > e.clientX) {
                    this.rect.x = e.clientX;
                }
                else {
                    this.rect.x = this.beginPoint.x;
                }
                if (this.beginPoint.y > e.clientY) {
                    this.rect.y = e.clientY;
                }
                else {
                    this.rect.y = this.beginPoint.y;
                }
                this.paint.clean();
                this.redrawAll();
                this.paint.drawRect(this.rect.x, this.rect.y, this.rect.width, this.rect.height, this.radius, this.color, this.lineWidth);
                var rect = new Rectangle_1.default(this.rect.x, this.rect.y, this.rect.width, this.rect.height, this.radius, this.color, this.lineWidth);
                this.record.push(rect);
            }
            else if (this.shape === Types_1.ShapeType.Curve) {
                this.points.push(new Point_1.default(e.clientX, e.clientY));
                this.paint.drawPoint(this.points, this.lineWidth, this.color);
            }
            else if (this.shape === Types_1.ShapeType.Circle) {
                var pointX = 0, pointY = 0;
                if (this.beginPoint.x > e.clientX) {
                    pointX = this.beginPoint.x - Math.abs(this.beginPoint.x - e.clientX) / 2;
                }
                else {
                    pointX = Math.abs(this.beginPoint.x - e.clientX) / 2 + this.beginPoint.x;
                }
                if (this.beginPoint.y > e.clientY) {
                    pointY = this.beginPoint.y - Math.abs(this.beginPoint.y - e.clientY) / 2;
                }
                else {
                    pointY = Math.abs(this.beginPoint.y - e.clientY) / 2 + this.beginPoint.y;
                }
                var lineX = Math.abs(this.beginPoint.x - e.clientX) / 2;
                var lineY = Math.abs(this.beginPoint.y - e.clientY) / 2;
                this.paint.clean();
                this.redrawAll();
                this.paint.drawEllipse(pointX, pointY, lineX, lineY, this.lineWidth, this.color);
            }
            else if (this.shape === Types_1.ShapeType.Arrow) {
                this.stopPoint.x = e.clientX;
                this.stopPoint.y = e.clientY;
                this.paint.clean();
                this.redrawAll();
                this.paint.drawArrow(this.beginPoint, this.stopPoint, this.color, this.range);
            }
            else if (this.shape === Types_1.ShapeType.Line) {
                var stopPoint = new Point_1.default(e.clientX, e.clientY);
                this.paint.clean();
                this.redrawAll();
                this.paint.drawLine(this.beginPoint, stopPoint, this.color, this.lineWidth);
            }
        }
    };
    /**
     * 鼠标mouseup事件处理器
     *
     * @private
     * @param {MouseEvent} e
     * @memberof YMPaint
     */
    YMPaint.prototype.handleMouseUp = function (e) {
        if (this.shape === Types_1.ShapeType.Rectangle) {
            var rect = new Rectangle_1.default(this.rect.x, this.rect.y, this.rect.width, this.rect.height, this.radius, this.color, this.lineWidth);
            this.rect = new Rectangle_1.default();
            this.history.push(rect);
            // 回调
            this.listeners && this.listeners.onDrawing && this.listeners.onDrawing(rect);
        }
        else if (this.shape === Types_1.ShapeType.Curve) {
            var curve = new Curve_1.default(this.points, this.color, this.lineWidth);
            this.history.push(curve);
            this.points = [];
            // 回调
            this.listeners && this.listeners.onDrawing && this.listeners.onDrawing(curve);
        }
        else if (this.shape === Types_1.ShapeType.Circle) {
            var pointX = 0, pointY = 0;
            if (this.beginPoint.x > e.clientX) {
                pointX = this.beginPoint.x - Math.abs(this.beginPoint.x - e.clientX) / 2;
            }
            else {
                pointX = Math.abs(this.beginPoint.x - e.clientX) / 2 + this.beginPoint.x;
            }
            if (this.beginPoint.y > e.clientY) {
                pointY = this.beginPoint.y - Math.abs(this.beginPoint.y - e.clientY) / 2;
            }
            else {
                pointY = Math.abs(this.beginPoint.y - e.clientY) / 2 + this.beginPoint.y;
            }
            var lineX = Math.abs(this.beginPoint.x - e.clientX) / 2;
            var lineY = Math.abs(this.beginPoint.y - e.clientY) / 2;
            var circle = new Circle_1.default(pointX, pointY, lineX, lineY, this.color, this.lineWidth);
            this.history.push(circle);
            this.beginPoint = new Point_1.default();
            // 回调
            this.listeners && this.listeners.onDrawing && this.listeners.onDrawing(circle);
        }
        else if (this.shape === Types_1.ShapeType.Arrow) {
            var arrow = new Arrow_1.default(this.beginPoint, new Point_1.default(e.clientX, e.clientY), this.range, this.color, this.lineWidth);
            this.history.push(arrow);
            this.beginPoint = new Point_1.default();
            // 回调
            this.listeners && this.listeners.onDrawing && this.listeners.onDrawing(arrow);
        }
        else if (this.shape === Types_1.ShapeType.Line) {
            var stopPoint = new Point_1.default(e.clientX, e.clientY);
            var line = new Line_1.default(this.beginPoint, stopPoint, this.color, this.lineWidth);
            this.history.push(line);
            this.beginPoint = new Point_1.default();
            // 回调
            this.listeners && this.listeners.onDrawing && this.listeners.onDrawing(line);
        }
        this.drawing = false;
    };
    /**
     * 绑定事件
     *
     * @private
     * @memberof YMPaint
     */
    YMPaint.prototype.bindEvent = function () {
        // 给canvas绑定事件
        this.canvas.addEventListener('mousedown', this.handleMouseDown.bind(this), false);
        this.canvas.addEventListener('mousemove', this.throttle(this.handleMouseMove, 10), false);
        this.canvas.addEventListener('mouseup', this.handleMouseUp.bind(this), false);
    };
    /**
     * 重绘历史记录中的所有元素
     *
     * @memberof YMPaint
     */
    YMPaint.prototype.redrawAll = function () {
        var self = this;
        this.history.forEach(function (item) {
            self.draw(item);
        });
    };
    YMPaint.prototype.draw = function (item) {
        if (item.type === Types_1.ShapeType.Rectangle) {
            this.paint.drawRect(item.x, item.y, item.width, item.height, item.radius, item.color, item.lineWidth);
        }
        else if (item.type === Types_1.ShapeType.Curve) {
            this.paint.drawPoint(item.points, item.lineWidth, item.color);
        }
        else if (item.type === Types_1.ShapeType.Circle) {
            this.paint.drawEllipse(item.x, item.y, item.a, item.b, item.lineWidth, item.color);
        }
        else if (item.type === Types_1.ShapeType.Arrow) {
            this.paint.drawArrow(item.beginPoint, item.stopPoint, item.color, item.range);
        }
        else if (item.type === Types_1.ShapeType.Line) {
            this.paint.drawLine(item.begin, item.end, item.color, item.lineWidth);
        }
    };
    YMPaint.prototype.setColor = function (color) {
        this.color = color;
    };
    YMPaint.prototype.getColor = function () {
        return this.color;
    };
    YMPaint.prototype.setShape = function (shape) {
        this.shape = shape;
    };
    YMPaint.prototype.getShape = function () {
        return this.shape;
    };
    /**
     * 撤销一步
     *
     * @memberof YMPaint
     */
    YMPaint.prototype.undo = function () {
        if (this.history.length > 0) {
            this.history.pop();
            // 撤销后重绘
            this.paint.clean();
            this.redrawAll();
        }
    };
    /**
     * 清屏
     *
     * @memberof YMPaint
     */
    YMPaint.prototype.cleanAll = function () {
        this.history = [];
        this.paint.clean();
    };
    YMPaint.prototype.addHistory = function (data) {
        this.history.push(data);
    };
    YMPaint.prototype.drawCursorPoint = function (x, y) {
        this.paint.clean();
        this.redrawAll();
        this.paint.drawFilledCircle(x, y);
    };
    /**
     * 函数节流
     *
     * @static
     * @param {Function} callback
     * @param {number} delay
     * @returns {Function}
     * @memberof YMPaint
     */
    YMPaint.prototype.throttle = function (callback, delay) {
        var self = this;
        var previousCall = new Date().getTime();
        return function () {
            var time = new Date().getTime();
            if ((time - previousCall) >= delay) {
                previousCall = time;
                callback.apply(self, arguments);
            }
        };
    };
    return YMPaint;
}());
exports.YMPaint = YMPaint;


/***/ }),
/* 4 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

Object.defineProperty(exports, "__esModule", { value: true });
var Point_1 = __webpack_require__(2);
/**
 * 绘画逻辑
 *
 * @class Paint
 */
var Paint = /** @class */ (function () {
    function Paint(canvas) {
        this.canvas = canvas;
        this.context = canvas.getContext('2d');
    }
    /**
     * 画点
     *
     * @param {Point[]} points
     * @param {number} lineWidth
     * @param {string} color
     * @memberof Paint
     */
    Paint.prototype.drawPoint = function (points, lineWidth, color) {
        for (var i = 0; i < points.length; i++) {
            this.context.beginPath();
            if (points[i].y && i) {
                this.context.moveTo(points[i - 1].x, points[i - 1].y);
            }
            else {
                this.context.moveTo(points[i].x - 1, points[i].y);
            }
            this.context.lineWidth = lineWidth;
            this.context.strokeStyle = color;
            this.context.lineTo(points[i].x, points[i].y);
            this.context.closePath();
            this.context.stroke();
        }
    };
    /**
     * 画椭圆
     *
     * @param {number} x
     * @param {number} y
     * @param {number} a
     * @param {number} b
     * @param {number} lineWidth
     * @param {string} color
     * @memberof Paint
     */
    Paint.prototype.drawEllipse = function (x, y, a, b, lineWidth, color) {
        this.context.beginPath();
        this.context.ellipse(x, y, a, b, 0, 0, 2 * Math.PI);
        this.context.lineWidth = lineWidth;
        this.context.fillStyle = 'rgba(0, 0, 0, 0)';
        this.context.strokeStyle = color;
        this.context.fill();
        this.context.stroke();
    };
    Paint.prototype.createRect = function (x, y, width, height, radius, color, type, lineWidth) {
        this.context.beginPath();
        this.context.moveTo(x, y + radius);
        this.context.lineTo(x, y + height - radius);
        this.context.quadraticCurveTo(x, y + height, x + radius, y + height);
        this.context.lineTo(x + width - radius, y + height);
        this.context.quadraticCurveTo(x + width, y + height, x + width, y + height - radius);
        this.context.lineTo(x + width, y + radius);
        this.context.quadraticCurveTo(x + width, y, x + width - radius, y);
        this.context.lineTo(x + radius, y);
        this.context.quadraticCurveTo(x, y, x, y + radius);
        // @ts-ignore
        this.context[type + 'Style'] = color;
        this.context.lineWidth = lineWidth;
        this.context.closePath();
        // @ts-ignore
        this.context[type]();
    };
    /**
     * 画空心矩形
     *
     * @private
     * @param {number} x
     * @param {number} y
     * @param {number} width
     * @param {number} height
     * @param {number} radius
     * @param {string} color
     * @param {number} lineWidth
     * @memberof Paint
     */
    Paint.prototype.drawRect = function (x, y, width, height, radius, color, lineWidth) {
        this.createRect(x, y, width, height, radius, color, 'stroke', lineWidth);
    };
    Paint.prototype.arrowCoord = function (beginPoint, stopPoint, range) {
        var polygonVertex = [];
        polygonVertex[0] = beginPoint.x;
        polygonVertex[1] = beginPoint.y;
        polygonVertex[6] = stopPoint.x;
        polygonVertex[7] = stopPoint.y;
        // 获取弧度
        var angle = Math.atan2(stopPoint.y - beginPoint.y, stopPoint.x - beginPoint.x) / Math.PI * 180;
        polygonVertex[8] = stopPoint.x - Paint.edgeLen * Math.cos(Math.PI / 180 * (angle + range));
        polygonVertex[9] = stopPoint.y - Paint.edgeLen * Math.sin(Math.PI / 180 * (angle + range));
        polygonVertex[4] = stopPoint.x - Paint.edgeLen * Math.cos(Math.PI / 180 * (angle - range));
        polygonVertex[5] = stopPoint.y - Paint.edgeLen * Math.sin(Math.PI / 180 * (angle - range));
        return polygonVertex;
    };
    Paint.prototype.sideCoord = function (polygonVertex) {
        var x = (polygonVertex[4] + polygonVertex[8]) / 2;
        var y = (polygonVertex[5] + polygonVertex[9]) / 2;
        var midPoint = new Point_1.default(x, y);
        polygonVertex[2] = (polygonVertex[4] + midPoint.x) / 2;
        polygonVertex[3] = (polygonVertex[5] + midPoint.y) / 2;
        polygonVertex[10] = (polygonVertex[8] + midPoint.x) / 2;
        polygonVertex[11] = (polygonVertex[9] + midPoint.y) / 2;
    };
    /**
     * 画箭头
     *
     * @param {Point} beginPoint
     * @param {Point} stopPoint
     * @param {string} color
     * @param {number} range
     * @memberof Paint
     */
    Paint.prototype.drawArrow = function (beginPoint, stopPoint, color, range) {
        var polygonVertex = this.arrowCoord(beginPoint, stopPoint, range);
        this.sideCoord(polygonVertex);
        this.context.fillStyle = color;
        this.context.beginPath();
        this.context.moveTo(polygonVertex[0], polygonVertex[1]);
        this.context.lineTo(polygonVertex[2], polygonVertex[3]);
        this.context.lineTo(polygonVertex[4], polygonVertex[5]);
        this.context.lineTo(polygonVertex[6], polygonVertex[7]);
        this.context.lineTo(polygonVertex[8], polygonVertex[9]);
        this.context.lineTo(polygonVertex[10], polygonVertex[11]);
        this.context.closePath();
        this.context.fill();
    };
    /**
     * 绘制直线
     *
     * @param {Point} beginPoint
     * @param {Point} stopPoint
     * @param {string} color
     * @param {number} lineWidth
     * @memberof Paint
     */
    Paint.prototype.drawLine = function (beginPoint, stopPoint, color, lineWidth) {
        this.context.beginPath();
        this.context.strokeStyle = color;
        this.context.lineWidth = lineWidth;
        this.context.moveTo(beginPoint.x, beginPoint.y);
        this.context.lineTo(stopPoint.x, stopPoint.y);
        this.context.closePath();
        this.context.stroke();
    };
    /**
     * 画三角形
     *
     * @param {Point} top
     * @param {Point} left
     * @param {Point} right
     * @param {string} color
     * @param {number} lineWidth
     * @memberof Paint
     */
    Paint.prototype.drawTriangle = function (top, left, right, color, lineWidth) {
        this.context.beginPath();
        this.context.strokeStyle = color;
        this.context.lineWidth = lineWidth;
        this.context.moveTo(top.x, top.y);
        this.context.lineTo(right.x, right.y);
        this.context.lineTo(left.x, left.y);
        this.context.closePath();
    };
    Paint.prototype.drawTriangle2 = function (beginPoint, stopPoint) {
    };
    /**
     * 绘制鼠标绘图点
     * @param x
     * @param y
     * @param radius
     * @param color
     */
    Paint.prototype.drawFilledCircle = function (x, y, radius, color) {
        if (radius === void 0) { radius = 5; }
        if (color === void 0) { color = 'red'; }
        this.context.beginPath();
        this.context.arc(x, y, radius, 0 * Math.PI, 2 * Math.PI, false);
        this.context.fillStyle = color;
        this.context.fill();
        this.context.closePath();
    };
    /**
     * 清空画板
     *
     * @memberof Paint
     */
    Paint.prototype.clean = function () {
        this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
    };
    Paint.edgeLen = 25;
    Paint.angle = 15;
    return Paint;
}());
exports.default = Paint;


/***/ }),
/* 5 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ShapeBase_1 = __webpack_require__(1);
var Types_1 = __webpack_require__(0);
/**
 * 圆
 *
 * @class Circle
 * @extends {ShapeBase}
 */
var Circle = /** @class */ (function (_super) {
    __extends(Circle, _super);
    function Circle(x, y, a, b, color, lineWidth) {
        var _this = _super.call(this, color, lineWidth, Types_1.ShapeType.Circle) || this;
        _this.x = x;
        _this.y = y;
        _this.a = a;
        _this.b = b;
        return _this;
    }
    return Circle;
}(ShapeBase_1.default));
exports.default = Circle;


/***/ }),
/* 6 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ShapeBase_1 = __webpack_require__(1);
var Types_1 = __webpack_require__(0);
/**
 * 矩形
 *
 * @class Rectangle
 * @extends {ShapeBase}
 */
var Rectangle = /** @class */ (function (_super) {
    __extends(Rectangle, _super);
    function Rectangle(x, y, width, height, radius, color, lineWidth) {
        if (x === void 0) { x = 0; }
        if (y === void 0) { y = 0; }
        if (width === void 0) { width = 0; }
        if (height === void 0) { height = 0; }
        if (radius === void 0) { radius = 0; }
        if (color === void 0) { color = ''; }
        if (lineWidth === void 0) { lineWidth = 0; }
        var _this = _super.call(this, color, lineWidth, Types_1.ShapeType.Rectangle) || this;
        _this.x = x;
        _this.y = y;
        _this.width = width;
        _this.height = height;
        _this.radius = radius;
        return _this;
    }
    return Rectangle;
}(ShapeBase_1.default));
exports.default = Rectangle;


/***/ }),
/* 7 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ShapeBase_1 = __webpack_require__(1);
var Types_1 = __webpack_require__(0);
/**
 * 曲线(自由划线)
 *
 * @class Curve
 * @extends {ShapeBase}
 */
var Curve = /** @class */ (function (_super) {
    __extends(Curve, _super);
    function Curve(points, color, lineWidth) {
        var _this = _super.call(this, color, lineWidth, Types_1.ShapeType.Curve) || this;
        _this.points = points;
        return _this;
    }
    return Curve;
}(ShapeBase_1.default));
exports.default = Curve;


/***/ }),
/* 8 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ShapeBase_1 = __webpack_require__(1);
var Types_1 = __webpack_require__(0);
/**
 * 箭头
 *
 * @class Arrow
 * @extends {ShapeBase}
 */
var Arrow = /** @class */ (function (_super) {
    __extends(Arrow, _super);
    function Arrow(beginPoint, stopPoint, range, color, lineWidth) {
        if (lineWidth === void 0) { lineWidth = 0; }
        var _this = _super.call(this, color, lineWidth, Types_1.ShapeType.Arrow) || this;
        _this.beginPoint = beginPoint;
        _this.stopPoint = stopPoint;
        _this.range = range;
        return _this;
    }
    return Arrow;
}(ShapeBase_1.default));
exports.default = Arrow;


/***/ }),
/* 9 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ShapeBase_1 = __webpack_require__(1);
var Types_1 = __webpack_require__(0);
/**
 * 直线
 *
 * @class Line
 * @extends {ShapeBase}
 */
var Line = /** @class */ (function (_super) {
    __extends(Line, _super);
    function Line(begin, end, color, lineWidth) {
        var _this = _super.call(this, color, lineWidth, Types_1.ShapeType.Line) || this;
        _this.begin = begin;
        _this.end = end;
        return _this;
    }
    return Line;
}(ShapeBase_1.default));
exports.default = Line;


/***/ }),
/* 10 */
/***/ (function(module, exports, __webpack_require__) {

"use strict";

var __extends = (this && this.__extends) || (function () {
    var extendStatics = Object.setPrototypeOf ||
        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||
        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };
    return function (d, b) {
        extendStatics(d, b);
        function __() { this.constructor = d; }
        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());
    };
})();
Object.defineProperty(exports, "__esModule", { value: true });
var ShapeBase_1 = __webpack_require__(1);
var Point_1 = __webpack_require__(2);
var Types_1 = __webpack_require__(0);
/**
 * 三角形
 *
 * @class Triangle
 * @extends {ShapeBase}
 */
var Triangle = /** @class */ (function (_super) {
    __extends(Triangle, _super);
    function Triangle(top, left, right, color, lineWidth) {
        if (top === void 0) { top = new Point_1.default(); }
        if (left === void 0) { left = new Point_1.default(); }
        if (right === void 0) { right = new Point_1.default(); }
        if (color === void 0) { color = ''; }
        if (lineWidth === void 0) { lineWidth = 0; }
        var _this = _super.call(this, color, lineWidth, Types_1.ShapeType.Triangle) || this;
        _this.topPoint = top;
        _this.leftPoint = left;
        _this.rightPoint = right;
        return _this;
    }
    return Triangle;
}(ShapeBase_1.default));
exports.default = Triangle;


/***/ })
/******/ ]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vd2VicGFjay9ib290c3RyYXAgM2QxNzliOWIyOWU3YTFiZTZmMjQiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXBlcy9UeXBlcy50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcGVzL1NoYXBlQmFzZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcGVzL1BvaW50LnRzIiwid2VicGFjazovLy8uL3NyYy95bXBhaW50LnRzIiwid2VicGFjazovLy8uL3NyYy9QYWludC50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcGVzL0NpcmNsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcGVzL1JlY3RhbmdsZS50cyIsIndlYnBhY2s6Ly8vLi9zcmMvc2hhcGVzL0N1cnZlLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFwZXMvQXJyb3cudHMiLCJ3ZWJwYWNrOi8vLy4vc3JjL3NoYXBlcy9MaW5lLnRzIiwid2VicGFjazovLy8uL3NyYy9zaGFwZXMvVHJpYW5nbGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7O0FBR0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsbUNBQTJCLDBCQUEwQixFQUFFO0FBQ3ZELHlDQUFpQyxlQUFlO0FBQ2hEO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLDhEQUFzRCwrREFBK0Q7O0FBRXJIO0FBQ0E7O0FBRUE7QUFDQTs7Ozs7Ozs7QUM3REE7QUFDQSw4Q0FBOEMsY0FBYztBQUM1RDtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDLDhCQUE4QjtBQUMvQjtBQUNBOzs7Ozs7OztBQ2xCQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0JBQStCLGlCQUFpQjtBQUNoRCxtQ0FBbUMsZUFBZTtBQUNsRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7OztBQ2pCQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLE9BQU87QUFDdEIsZUFBZSxPQUFPO0FBQ3RCO0FBQ0E7QUFDQTtBQUNBLDJCQUEyQixPQUFPO0FBQ2xDLDJCQUEyQixPQUFPO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7OztBQ3RCQTtBQUNBLDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxXQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsZUFBZSxXQUFXO0FBQzFCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEZBQTBGLDZCQUE2QjtBQUN2SDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxlQUFlLFdBQVc7QUFDMUI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFNBQVM7QUFDVDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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QTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUNBQW1DLGVBQWU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7Ozs7Ozs7O0FDaENBO0FBQ0E7QUFDQTtBQUNBLFVBQVUsZ0JBQWdCLHNDQUFzQyxpQkFBaUIsRUFBRTtBQUNuRix5QkFBeUIsdURBQXVEO0FBQ2hGO0FBQ0E7QUFDQSx1QkFBdUIsc0JBQXNCO0FBQzdDO0FBQ0E7QUFDQSxDQUFDO0FBQ0QsOENBQThDLGNBQWM7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEOzs7Ozs7OztBQzlCQTtBQUNBO0FBQ0E7QUFDQSxVQUFVLGdCQUFnQixzQ0FBc0MsaUJBQWlCLEVBQUU7QUFDbkYseUJBQXlCLHVEQUF1RDtBQUNoRjtBQUNBO0FBQ0EsdUJBQXVCLHNCQUFzQjtBQUM3QztBQUNBO0FBQ0EsQ0FBQztBQUNELDhDQUE4QyxjQUFjO0FBQzVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLDZCQUE2QjtBQUMxRCw4QkFBOEIsOEJBQThCO0FBQzVELCtCQUErQiwrQkFBK0I7QUFDOUQsK0JBQStCLFlBQVk7QUFDM0MsbUNBQW1DLGVBQWU7QUFDbEQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0QiLCJmaWxlIjoieW1wYWludC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHtcbiBcdFx0XHRcdGNvbmZpZ3VyYWJsZTogZmFsc2UsXG4gXHRcdFx0XHRlbnVtZXJhYmxlOiB0cnVlLFxuIFx0XHRcdFx0Z2V0OiBnZXR0ZXJcbiBcdFx0XHR9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZ2V0RGVmYXVsdEV4cG9ydCBmdW5jdGlvbiBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIG5vbi1oYXJtb255IG1vZHVsZXNcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubiA9IGZ1bmN0aW9uKG1vZHVsZSkge1xuIFx0XHR2YXIgZ2V0dGVyID0gbW9kdWxlICYmIG1vZHVsZS5fX2VzTW9kdWxlID9cbiBcdFx0XHRmdW5jdGlvbiBnZXREZWZhdWx0KCkgeyByZXR1cm4gbW9kdWxlWydkZWZhdWx0J107IH0gOlxuIFx0XHRcdGZ1bmN0aW9uIGdldE1vZHVsZUV4cG9ydHMoKSB7IHJldHVybiBtb2R1bGU7IH07XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18uZChnZXR0ZXIsICdhJywgZ2V0dGVyKTtcbiBcdFx0cmV0dXJuIGdldHRlcjtcbiBcdH07XG5cbiBcdC8vIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbFxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5vID0gZnVuY3Rpb24ob2JqZWN0LCBwcm9wZXJ0eSkgeyByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iamVjdCwgcHJvcGVydHkpOyB9O1xuXG4gXHQvLyBfX3dlYnBhY2tfcHVibGljX3BhdGhfX1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5wID0gXCIuL2Rpc3RcIjtcblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAzKTtcblxuXG5cbi8vIFdFQlBBQ0sgRk9PVEVSIC8vXG4vLyB3ZWJwYWNrL2Jvb3RzdHJhcCAzZDE3OWI5YjI5ZTdhMWJlNmYyNCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbi8qKlxyXG4gKlxyXG4gKiBTaGFwZeexu+Wei1xyXG4gKiBAZW51bSB7bnVtYmVyfVxyXG4gKi9cclxudmFyIFNoYXBlVHlwZTtcclxuKGZ1bmN0aW9uIChTaGFwZVR5cGUpIHtcclxuICAgIFNoYXBlVHlwZVtcIlJlY3RhbmdsZVwiXSA9IFwicmVjdFwiO1xyXG4gICAgU2hhcGVUeXBlW1wiQ2lyY2xlXCJdID0gXCJjaXJjbGVcIjtcclxuICAgIFNoYXBlVHlwZVtcIkxpbmVcIl0gPSBcImxpbmVcIjtcclxuICAgIFNoYXBlVHlwZVtcIkFycm93XCJdID0gXCJhcnJvd1wiO1xyXG4gICAgU2hhcGVUeXBlW1wiUG9pbnRcIl0gPSBcInBvaW50XCI7XHJcbiAgICBTaGFwZVR5cGVbXCJUcmlhbmdsZVwiXSA9IFwidHJpYW5nbGVcIjtcclxuICAgIFNoYXBlVHlwZVtcIkN1cnZlXCJdID0gXCJjdXJ2ZVwiO1xyXG59KShTaGFwZVR5cGUgfHwgKFNoYXBlVHlwZSA9IHt9KSk7XHJcbmV4cG9ydHMuU2hhcGVUeXBlID0gU2hhcGVUeXBlO1xyXG47XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3NoYXBlcy9UeXBlcy50c1xuLy8gbW9kdWxlIGlkID0gMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiLCJcInVzZSBzdHJpY3RcIjtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG4vKipcclxuICog5b2i54q25Z+656GA57G7XHJcbiAqXHJcbiAqIEBjbGFzcyBTaGFwZUJhc2VcclxuICovXHJcbnZhciBTaGFwZUJhc2UgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBTaGFwZUJhc2UoY29sb3IsIGxpbmVXaWR0aCwgdHlwZSkge1xyXG4gICAgICAgIGlmIChjb2xvciA9PT0gdm9pZCAwKSB7IGNvbG9yID0gJ2JsYWNrJzsgfVxyXG4gICAgICAgIGlmIChsaW5lV2lkdGggPT09IHZvaWQgMCkgeyBsaW5lV2lkdGggPSAwOyB9XHJcbiAgICAgICAgdGhpcy5jb2xvciA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMubGluZVdpZHRoID0gbGluZVdpZHRoO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gU2hhcGVCYXNlO1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBTaGFwZUJhc2U7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3NoYXBlcy9TaGFwZUJhc2UudHNcbi8vIG1vZHVsZSBpZCA9IDFcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxuLyoqXHJcbiAqIOeCuVxyXG4gKlxyXG4gKiBAY2xhc3MgUG9pbnRcclxuICovXHJcbnZhciBQb2ludCA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uICgpIHtcclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhbiBpbnN0YW5jZSBvZiBQb2ludC5cclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBbeD0wXVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IFt5PTBdXHJcbiAgICAgKiBAbWVtYmVyb2YgUG9pbnRcclxuICAgICAqL1xyXG4gICAgZnVuY3Rpb24gUG9pbnQoeCwgeSkge1xyXG4gICAgICAgIGlmICh4ID09PSB2b2lkIDApIHsgeCA9IDA7IH1cclxuICAgICAgICBpZiAoeSA9PT0gdm9pZCAwKSB7IHkgPSAwOyB9XHJcbiAgICAgICAgdGhpcy54ID0geDtcclxuICAgICAgICB0aGlzLnkgPSB5O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFBvaW50O1xyXG59KCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBQb2ludDtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc2hhcGVzL1BvaW50LnRzXG4vLyBtb2R1bGUgaWQgPSAyXG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbmV4cG9ydHMuaXNEZWJ1ZyA9IGZhbHNlO1xyXG5leHBvcnRzLnZlcnNpb24gPSAnMS4wLjAnO1xyXG52YXIgUGFpbnRfMSA9IHJlcXVpcmUoXCIuL1BhaW50XCIpO1xyXG52YXIgUG9pbnRfMSA9IHJlcXVpcmUoXCIuL3NoYXBlcy9Qb2ludFwiKTtcclxudmFyIENpcmNsZV8xID0gcmVxdWlyZShcIi4vc2hhcGVzL0NpcmNsZVwiKTtcclxudmFyIFJlY3RhbmdsZV8xID0gcmVxdWlyZShcIi4vc2hhcGVzL1JlY3RhbmdsZVwiKTtcclxudmFyIEN1cnZlXzEgPSByZXF1aXJlKFwiLi9zaGFwZXMvQ3VydmVcIik7XHJcbnZhciBBcnJvd18xID0gcmVxdWlyZShcIi4vc2hhcGVzL0Fycm93XCIpO1xyXG52YXIgTGluZV8xID0gcmVxdWlyZShcIi4vc2hhcGVzL0xpbmVcIik7XHJcbnZhciBUcmlhbmdsZV8xID0gcmVxdWlyZShcIi4vc2hhcGVzL1RyaWFuZ2xlXCIpO1xyXG52YXIgVHlwZXNfMSA9IHJlcXVpcmUoXCIuL3NoYXBlcy9UeXBlc1wiKTtcclxuZXhwb3J0cy5TaGFwZVR5cGUgPSBUeXBlc18xLlNoYXBlVHlwZTtcclxuLyoqXHJcbiAqIFlNUGFpbnRcclxuICpcclxuICogQGV4cG9ydFxyXG4gKiBAY2xhc3MgWU1QYWludFxyXG4gKi9cclxudmFyIFlNUGFpbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBZTVBhaW50KGNvbmZpZywgbGlzdGVuZXJzKSB7XHJcbiAgICAgICAgdGhpcy5jYW52YXMgPSBjb25maWcuY2FudmFzO1xyXG4gICAgICAgIHRoaXMucGFpbnQgPSBuZXcgUGFpbnRfMS5kZWZhdWx0KHRoaXMuY2FudmFzKTtcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyA9IGxpc3RlbmVycztcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29uZmlnLmNvbG9yIHx8ICdibGFjayc7XHJcbiAgICAgICAgdGhpcy5saW5lV2lkdGggPSBjb25maWcubGluZVdpZHRoIHx8IDI7XHJcbiAgICAgICAgdGhpcy5yYWRpdXMgPSBjb25maWcucmFkaXVzIHx8IDA7XHJcbiAgICAgICAgdGhpcy5zaGFwZSA9IGNvbmZpZy5zaGFwZSB8fCAnbGluZSc7XHJcbiAgICAgICAgdGhpcy5hbmdsZSA9IDA7XHJcbiAgICAgICAgdGhpcy5yYW5nZSA9IDI1O1xyXG4gICAgICAgIHRoaXMuYmVnaW5Qb2ludCA9IG5ldyBQb2ludF8xLmRlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnN0b3BQb2ludCA9IG5ldyBQb2ludF8xLmRlZmF1bHQoKTtcclxuICAgICAgICB0aGlzLnJlY3QgPSBuZXcgUmVjdGFuZ2xlXzEuZGVmYXVsdCgpO1xyXG4gICAgICAgIHRoaXMudHJpYW5nbGUgPSBuZXcgVHJpYW5nbGVfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgdGhpcy5wb2ludHMgPSBbXTtcclxuICAgICAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgICAgICB0aGlzLnJlY29yZCA9IFtdO1xyXG4gICAgICAgIC8vIOe7keWumuS6i+S7tlxyXG4gICAgICAgIHRoaXMuYmluZEV2ZW50KCk7XHJcbiAgICB9XHJcbiAgICAvKipcclxuICAgICAqIOm8oOagh21vdXNlZG93buS6i+S7tuWkhOeQhuWZqFxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge01vdXNlRXZlbnR9IGVcclxuICAgICAqIEBtZW1iZXJvZiBZTVBhaW50XHJcbiAgICAgKi9cclxuICAgIFlNUGFpbnQucHJvdG90eXBlLmhhbmRsZU1vdXNlRG93biA9IGZ1bmN0aW9uIChlKSB7XHJcbiAgICAgICAgdmFyIHggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgdmFyIHkgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgdGhpcy5kcmF3aW5nID0gdHJ1ZTtcclxuICAgICAgICBpZiAodGhpcy5zaGFwZSA9PT0gJ3JlY3QnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5Qb2ludC54ID0geDtcclxuICAgICAgICAgICAgdGhpcy5iZWdpblBvaW50LnkgPSB5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnNoYXBlID09PSAnY3VydmUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRzLnB1c2gobmV3IFBvaW50XzEuZGVmYXVsdCh4LCB5KSk7XHJcbiAgICAgICAgICAgIHRoaXMucGFpbnQuZHJhd1BvaW50KHRoaXMucG9pbnRzLCB0aGlzLmxpbmVXaWR0aCwgdGhpcy5jb2xvcik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2hhcGUgPT09ICdjaXJjbGUnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5Qb2ludC54ID0geDtcclxuICAgICAgICAgICAgdGhpcy5iZWdpblBvaW50LnkgPSB5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnNoYXBlID09PSAnYXJyb3cnKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5Qb2ludC54ID0geDtcclxuICAgICAgICAgICAgdGhpcy5iZWdpblBvaW50LnkgPSB5O1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnNoYXBlID09PSAnbGluZScpIHtcclxuICAgICAgICAgICAgdGhpcy5iZWdpblBvaW50LnggPSB4O1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luUG9pbnQueSA9IHk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICog6byg5qCHbW91c2Vtb3Zl5LqL5Lu25aSE55CG5ZmoXHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBwYXJhbSB7TW91c2VFdmVudH0gZVxyXG4gICAgICogQG1lbWJlcm9mIFlNUGFpbnRcclxuICAgICAqL1xyXG4gICAgWU1QYWludC5wcm90b3R5cGUuaGFuZGxlTW91c2VNb3ZlID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICAvLyDpvKDmoIfnp7vliqjlm57osINcclxuICAgICAgICB0aGlzLmxpc3RlbmVycyAmJiB0aGlzLmxpc3RlbmVycy5vbkN1cnNvck1vdmluZyAmJiB0aGlzLmxpc3RlbmVycy5vbkN1cnNvck1vdmluZyh7IHg6IGUuY2xpZW50WCwgeTogZS5jbGllbnRZIH0pO1xyXG4gICAgICAgIGlmICh0aGlzLmRyYXdpbmcpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuc2hhcGUgPT09IFR5cGVzXzEuU2hhcGVUeXBlLlJlY3RhbmdsZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWN0LndpZHRoID0gTWF0aC5hYnModGhpcy5iZWdpblBvaW50LnggLSBlLmNsaWVudFgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWN0LmhlaWdodCA9IE1hdGguYWJzKHRoaXMuYmVnaW5Qb2ludC55IC0gZS5jbGllbnRZKTtcclxuICAgICAgICAgICAgICAgIC8vIOehruWumuato+ehrueahOefqeW9ouW3puS4iuinkuWdkOagh1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYmVnaW5Qb2ludC54ID4gZS5jbGllbnRYKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWN0LnggPSBlLmNsaWVudFg7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY3QueCA9IHRoaXMuYmVnaW5Qb2ludC54O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYmVnaW5Qb2ludC55ID4gZS5jbGllbnRZKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5yZWN0LnkgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlY3QueSA9IHRoaXMuYmVnaW5Qb2ludC55O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludC5jbGVhbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWRyYXdBbGwoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnQuZHJhd1JlY3QodGhpcy5yZWN0LngsIHRoaXMucmVjdC55LCB0aGlzLnJlY3Qud2lkdGgsIHRoaXMucmVjdC5oZWlnaHQsIHRoaXMucmFkaXVzLCB0aGlzLmNvbG9yLCB0aGlzLmxpbmVXaWR0aCk7XHJcbiAgICAgICAgICAgICAgICB2YXIgcmVjdCA9IG5ldyBSZWN0YW5nbGVfMS5kZWZhdWx0KHRoaXMucmVjdC54LCB0aGlzLnJlY3QueSwgdGhpcy5yZWN0LndpZHRoLCB0aGlzLnJlY3QuaGVpZ2h0LCB0aGlzLnJhZGl1cywgdGhpcy5jb2xvciwgdGhpcy5saW5lV2lkdGgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWNvcmQucHVzaChyZWN0KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNoYXBlID09PSBUeXBlc18xLlNoYXBlVHlwZS5DdXJ2ZSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wb2ludHMucHVzaChuZXcgUG9pbnRfMS5kZWZhdWx0KGUuY2xpZW50WCwgZS5jbGllbnRZKSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50LmRyYXdQb2ludCh0aGlzLnBvaW50cywgdGhpcy5saW5lV2lkdGgsIHRoaXMuY29sb3IpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuc2hhcGUgPT09IFR5cGVzXzEuU2hhcGVUeXBlLkNpcmNsZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHBvaW50WCA9IDAsIHBvaW50WSA9IDA7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5iZWdpblBvaW50LnggPiBlLmNsaWVudFgpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludFggPSB0aGlzLmJlZ2luUG9pbnQueCAtIE1hdGguYWJzKHRoaXMuYmVnaW5Qb2ludC54IC0gZS5jbGllbnRYKSAvIDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludFggPSBNYXRoLmFicyh0aGlzLmJlZ2luUG9pbnQueCAtIGUuY2xpZW50WCkgLyAyICsgdGhpcy5iZWdpblBvaW50Lng7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5iZWdpblBvaW50LnkgPiBlLmNsaWVudFkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludFkgPSB0aGlzLmJlZ2luUG9pbnQueSAtIE1hdGguYWJzKHRoaXMuYmVnaW5Qb2ludC55IC0gZS5jbGllbnRZKSAvIDI7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwb2ludFkgPSBNYXRoLmFicyh0aGlzLmJlZ2luUG9pbnQueSAtIGUuY2xpZW50WSkgLyAyICsgdGhpcy5iZWdpblBvaW50Lnk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB2YXIgbGluZVggPSBNYXRoLmFicyh0aGlzLmJlZ2luUG9pbnQueCAtIGUuY2xpZW50WCkgLyAyO1xyXG4gICAgICAgICAgICAgICAgdmFyIGxpbmVZID0gTWF0aC5hYnModGhpcy5iZWdpblBvaW50LnkgLSBlLmNsaWVudFkpIC8gMjtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnQuY2xlYW4oKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucmVkcmF3QWxsKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50LmRyYXdFbGxpcHNlKHBvaW50WCwgcG9pbnRZLCBsaW5lWCwgbGluZVksIHRoaXMubGluZVdpZHRoLCB0aGlzLmNvbG9yKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIGlmICh0aGlzLnNoYXBlID09PSBUeXBlc18xLlNoYXBlVHlwZS5BcnJvdykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdG9wUG9pbnQueCA9IGUuY2xpZW50WDtcclxuICAgICAgICAgICAgICAgIHRoaXMuc3RvcFBvaW50LnkgPSBlLmNsaWVudFk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBhaW50LmNsZWFuKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlZHJhd0FsbCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludC5kcmF3QXJyb3codGhpcy5iZWdpblBvaW50LCB0aGlzLnN0b3BQb2ludCwgdGhpcy5jb2xvciwgdGhpcy5yYW5nZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSBpZiAodGhpcy5zaGFwZSA9PT0gVHlwZXNfMS5TaGFwZVR5cGUuTGluZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHN0b3BQb2ludCA9IG5ldyBQb2ludF8xLmRlZmF1bHQoZS5jbGllbnRYLCBlLmNsaWVudFkpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wYWludC5jbGVhbigpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWRyYXdBbGwoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGFpbnQuZHJhd0xpbmUodGhpcy5iZWdpblBvaW50LCBzdG9wUG9pbnQsIHRoaXMuY29sb3IsIHRoaXMubGluZVdpZHRoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIOm8oOagh21vdXNldXDkuovku7blpITnkIblmahcclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtNb3VzZUV2ZW50fSBlXHJcbiAgICAgKiBAbWVtYmVyb2YgWU1QYWludFxyXG4gICAgICovXHJcbiAgICBZTVBhaW50LnByb3RvdHlwZS5oYW5kbGVNb3VzZVVwID0gZnVuY3Rpb24gKGUpIHtcclxuICAgICAgICBpZiAodGhpcy5zaGFwZSA9PT0gVHlwZXNfMS5TaGFwZVR5cGUuUmVjdGFuZ2xlKSB7XHJcbiAgICAgICAgICAgIHZhciByZWN0ID0gbmV3IFJlY3RhbmdsZV8xLmRlZmF1bHQodGhpcy5yZWN0LngsIHRoaXMucmVjdC55LCB0aGlzLnJlY3Qud2lkdGgsIHRoaXMucmVjdC5oZWlnaHQsIHRoaXMucmFkaXVzLCB0aGlzLmNvbG9yLCB0aGlzLmxpbmVXaWR0aCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVjdCA9IG5ldyBSZWN0YW5nbGVfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKHJlY3QpO1xyXG4gICAgICAgICAgICAvLyDlm57osINcclxuICAgICAgICAgICAgdGhpcy5saXN0ZW5lcnMgJiYgdGhpcy5saXN0ZW5lcnMub25EcmF3aW5nICYmIHRoaXMubGlzdGVuZXJzLm9uRHJhd2luZyhyZWN0KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zaGFwZSA9PT0gVHlwZXNfMS5TaGFwZVR5cGUuQ3VydmUpIHtcclxuICAgICAgICAgICAgdmFyIGN1cnZlID0gbmV3IEN1cnZlXzEuZGVmYXVsdCh0aGlzLnBvaW50cywgdGhpcy5jb2xvciwgdGhpcy5saW5lV2lkdGgpO1xyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChjdXJ2ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucG9pbnRzID0gW107XHJcbiAgICAgICAgICAgIC8vIOWbnuiwg1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycyAmJiB0aGlzLmxpc3RlbmVycy5vbkRyYXdpbmcgJiYgdGhpcy5saXN0ZW5lcnMub25EcmF3aW5nKGN1cnZlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAodGhpcy5zaGFwZSA9PT0gVHlwZXNfMS5TaGFwZVR5cGUuQ2lyY2xlKSB7XHJcbiAgICAgICAgICAgIHZhciBwb2ludFggPSAwLCBwb2ludFkgPSAwO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5iZWdpblBvaW50LnggPiBlLmNsaWVudFgpIHtcclxuICAgICAgICAgICAgICAgIHBvaW50WCA9IHRoaXMuYmVnaW5Qb2ludC54IC0gTWF0aC5hYnModGhpcy5iZWdpblBvaW50LnggLSBlLmNsaWVudFgpIC8gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBvaW50WCA9IE1hdGguYWJzKHRoaXMuYmVnaW5Qb2ludC54IC0gZS5jbGllbnRYKSAvIDIgKyB0aGlzLmJlZ2luUG9pbnQueDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5iZWdpblBvaW50LnkgPiBlLmNsaWVudFkpIHtcclxuICAgICAgICAgICAgICAgIHBvaW50WSA9IHRoaXMuYmVnaW5Qb2ludC55IC0gTWF0aC5hYnModGhpcy5iZWdpblBvaW50LnkgLSBlLmNsaWVudFkpIC8gMjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHBvaW50WSA9IE1hdGguYWJzKHRoaXMuYmVnaW5Qb2ludC55IC0gZS5jbGllbnRZKSAvIDIgKyB0aGlzLmJlZ2luUG9pbnQueTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXIgbGluZVggPSBNYXRoLmFicyh0aGlzLmJlZ2luUG9pbnQueCAtIGUuY2xpZW50WCkgLyAyO1xyXG4gICAgICAgICAgICB2YXIgbGluZVkgPSBNYXRoLmFicyh0aGlzLmJlZ2luUG9pbnQueSAtIGUuY2xpZW50WSkgLyAyO1xyXG4gICAgICAgICAgICB2YXIgY2lyY2xlID0gbmV3IENpcmNsZV8xLmRlZmF1bHQocG9pbnRYLCBwb2ludFksIGxpbmVYLCBsaW5lWSwgdGhpcy5jb2xvciwgdGhpcy5saW5lV2lkdGgpO1xyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChjaXJjbGUpO1xyXG4gICAgICAgICAgICB0aGlzLmJlZ2luUG9pbnQgPSBuZXcgUG9pbnRfMS5kZWZhdWx0KCk7XHJcbiAgICAgICAgICAgIC8vIOWbnuiwg1xyXG4gICAgICAgICAgICB0aGlzLmxpc3RlbmVycyAmJiB0aGlzLmxpc3RlbmVycy5vbkRyYXdpbmcgJiYgdGhpcy5saXN0ZW5lcnMub25EcmF3aW5nKGNpcmNsZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKHRoaXMuc2hhcGUgPT09IFR5cGVzXzEuU2hhcGVUeXBlLkFycm93KSB7XHJcbiAgICAgICAgICAgIHZhciBhcnJvdyA9IG5ldyBBcnJvd18xLmRlZmF1bHQodGhpcy5iZWdpblBvaW50LCBuZXcgUG9pbnRfMS5kZWZhdWx0KGUuY2xpZW50WCwgZS5jbGllbnRZKSwgdGhpcy5yYW5nZSwgdGhpcy5jb2xvciwgdGhpcy5saW5lV2lkdGgpO1xyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucHVzaChhcnJvdyk7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5Qb2ludCA9IG5ldyBQb2ludF8xLmRlZmF1bHQoKTtcclxuICAgICAgICAgICAgLy8g5Zue6LCDXHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzICYmIHRoaXMubGlzdGVuZXJzLm9uRHJhd2luZyAmJiB0aGlzLmxpc3RlbmVycy5vbkRyYXdpbmcoYXJyb3cpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBlbHNlIGlmICh0aGlzLnNoYXBlID09PSBUeXBlc18xLlNoYXBlVHlwZS5MaW5lKSB7XHJcbiAgICAgICAgICAgIHZhciBzdG9wUG9pbnQgPSBuZXcgUG9pbnRfMS5kZWZhdWx0KGUuY2xpZW50WCwgZS5jbGllbnRZKTtcclxuICAgICAgICAgICAgdmFyIGxpbmUgPSBuZXcgTGluZV8xLmRlZmF1bHQodGhpcy5iZWdpblBvaW50LCBzdG9wUG9pbnQsIHRoaXMuY29sb3IsIHRoaXMubGluZVdpZHRoKTtcclxuICAgICAgICAgICAgdGhpcy5oaXN0b3J5LnB1c2gobGluZSk7XHJcbiAgICAgICAgICAgIHRoaXMuYmVnaW5Qb2ludCA9IG5ldyBQb2ludF8xLmRlZmF1bHQoKTtcclxuICAgICAgICAgICAgLy8g5Zue6LCDXHJcbiAgICAgICAgICAgIHRoaXMubGlzdGVuZXJzICYmIHRoaXMubGlzdGVuZXJzLm9uRHJhd2luZyAmJiB0aGlzLmxpc3RlbmVycy5vbkRyYXdpbmcobGluZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuZHJhd2luZyA9IGZhbHNlO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICog57uR5a6a5LqL5Lu2XHJcbiAgICAgKlxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqIEBtZW1iZXJvZiBZTVBhaW50XHJcbiAgICAgKi9cclxuICAgIFlNUGFpbnQucHJvdG90eXBlLmJpbmRFdmVudCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAvLyDnu5ljYW52YXPnu5Hlrprkuovku7ZcclxuICAgICAgICB0aGlzLmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLmhhbmRsZU1vdXNlRG93bi5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy50aHJvdHRsZSh0aGlzLmhhbmRsZU1vdXNlTW92ZSwgMTApLCBmYWxzZSk7XHJcbiAgICAgICAgdGhpcy5jYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2V1cCcsIHRoaXMuaGFuZGxlTW91c2VVcC5iaW5kKHRoaXMpLCBmYWxzZSk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiDph43nu5jljoblj7LorrDlvZXkuK3nmoTmiYDmnInlhYPntKBcclxuICAgICAqXHJcbiAgICAgKiBAbWVtYmVyb2YgWU1QYWludFxyXG4gICAgICovXHJcbiAgICBZTVBhaW50LnByb3RvdHlwZS5yZWRyYXdBbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7XHJcbiAgICAgICAgICAgIHNlbGYuZHJhdyhpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH07XHJcbiAgICBZTVBhaW50LnByb3RvdHlwZS5kcmF3ID0gZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICBpZiAoaXRlbS50eXBlID09PSBUeXBlc18xLlNoYXBlVHlwZS5SZWN0YW5nbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWludC5kcmF3UmVjdChpdGVtLngsIGl0ZW0ueSwgaXRlbS53aWR0aCwgaXRlbS5oZWlnaHQsIGl0ZW0ucmFkaXVzLCBpdGVtLmNvbG9yLCBpdGVtLmxpbmVXaWR0aCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2UgaWYgKGl0ZW0udHlwZSA9PT0gVHlwZXNfMS5TaGFwZVR5cGUuQ3VydmUpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWludC5kcmF3UG9pbnQoaXRlbS5wb2ludHMsIGl0ZW0ubGluZVdpZHRoLCBpdGVtLmNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSBUeXBlc18xLlNoYXBlVHlwZS5DaXJjbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5wYWludC5kcmF3RWxsaXBzZShpdGVtLngsIGl0ZW0ueSwgaXRlbS5hLCBpdGVtLmIsIGl0ZW0ubGluZVdpZHRoLCBpdGVtLmNvbG9yKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSBUeXBlc18xLlNoYXBlVHlwZS5BcnJvdykge1xyXG4gICAgICAgICAgICB0aGlzLnBhaW50LmRyYXdBcnJvdyhpdGVtLmJlZ2luUG9pbnQsIGl0ZW0uc3RvcFBvaW50LCBpdGVtLmNvbG9yLCBpdGVtLnJhbmdlKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZWxzZSBpZiAoaXRlbS50eXBlID09PSBUeXBlc18xLlNoYXBlVHlwZS5MaW5lKSB7XHJcbiAgICAgICAgICAgIHRoaXMucGFpbnQuZHJhd0xpbmUoaXRlbS5iZWdpbiwgaXRlbS5lbmQsIGl0ZW0uY29sb3IsIGl0ZW0ubGluZVdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICB9O1xyXG4gICAgWU1QYWludC5wcm90b3R5cGUuc2V0Q29sb3IgPSBmdW5jdGlvbiAoY29sb3IpIHtcclxuICAgICAgICB0aGlzLmNvbG9yID0gY29sb3I7XHJcbiAgICB9O1xyXG4gICAgWU1QYWludC5wcm90b3R5cGUuZ2V0Q29sb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29sb3I7XHJcbiAgICB9O1xyXG4gICAgWU1QYWludC5wcm90b3R5cGUuc2V0U2hhcGUgPSBmdW5jdGlvbiAoc2hhcGUpIHtcclxuICAgICAgICB0aGlzLnNoYXBlID0gc2hhcGU7XHJcbiAgICB9O1xyXG4gICAgWU1QYWludC5wcm90b3R5cGUuZ2V0U2hhcGUgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2hhcGU7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiDmkqTplIDkuIDmraVcclxuICAgICAqXHJcbiAgICAgKiBAbWVtYmVyb2YgWU1QYWludFxyXG4gICAgICovXHJcbiAgICBZTVBhaW50LnByb3RvdHlwZS51bmRvID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmhpc3RvcnkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLmhpc3RvcnkucG9wKCk7XHJcbiAgICAgICAgICAgIC8vIOaSpOmUgOWQjumHjee7mFxyXG4gICAgICAgICAgICB0aGlzLnBhaW50LmNsZWFuKCk7XHJcbiAgICAgICAgICAgIHRoaXMucmVkcmF3QWxsKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICog5riF5bGPXHJcbiAgICAgKlxyXG4gICAgICogQG1lbWJlcm9mIFlNUGFpbnRcclxuICAgICAqL1xyXG4gICAgWU1QYWludC5wcm90b3R5cGUuY2xlYW5BbGwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICAgICAgdGhpcy5wYWludC5jbGVhbigpO1xyXG4gICAgfTtcclxuICAgIFlNUGFpbnQucHJvdG90eXBlLmFkZEhpc3RvcnkgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeS5wdXNoKGRhdGEpO1xyXG4gICAgfTtcclxuICAgIFlNUGFpbnQucHJvdG90eXBlLmRyYXdDdXJzb3JQb2ludCA9IGZ1bmN0aW9uICh4LCB5KSB7XHJcbiAgICAgICAgdGhpcy5wYWludC5jbGVhbigpO1xyXG4gICAgICAgIHRoaXMucmVkcmF3QWxsKCk7XHJcbiAgICAgICAgdGhpcy5wYWludC5kcmF3RmlsbGVkQ2lyY2xlKHgsIHkpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICog5Ye95pWw6IqC5rWBXHJcbiAgICAgKlxyXG4gICAgICogQHN0YXRpY1xyXG4gICAgICogQHBhcmFtIHtGdW5jdGlvbn0gY2FsbGJhY2tcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBkZWxheVxyXG4gICAgICogQHJldHVybnMge0Z1bmN0aW9ufVxyXG4gICAgICogQG1lbWJlcm9mIFlNUGFpbnRcclxuICAgICAqL1xyXG4gICAgWU1QYWludC5wcm90b3R5cGUudGhyb3R0bGUgPSBmdW5jdGlvbiAoY2FsbGJhY2ssIGRlbGF5KSB7XHJcbiAgICAgICAgdmFyIHNlbGYgPSB0aGlzO1xyXG4gICAgICAgIHZhciBwcmV2aW91c0NhbGwgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICByZXR1cm4gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICB2YXIgdGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBpZiAoKHRpbWUgLSBwcmV2aW91c0NhbGwpID49IGRlbGF5KSB7XHJcbiAgICAgICAgICAgICAgICBwcmV2aW91c0NhbGwgPSB0aW1lO1xyXG4gICAgICAgICAgICAgICAgY2FsbGJhY2suYXBwbHkoc2VsZiwgYXJndW1lbnRzKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG4gICAgcmV0dXJuIFlNUGFpbnQ7XHJcbn0oKSk7XHJcbmV4cG9ydHMuWU1QYWludCA9IFlNUGFpbnQ7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL3ltcGFpbnQudHNcbi8vIG1vZHVsZSBpZCA9IDNcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBcIl9fZXNNb2R1bGVcIiwgeyB2YWx1ZTogdHJ1ZSB9KTtcclxudmFyIFBvaW50XzEgPSByZXF1aXJlKFwiLi9zaGFwZXMvUG9pbnRcIik7XHJcbi8qKlxyXG4gKiDnu5jnlLvpgLvovpFcclxuICpcclxuICogQGNsYXNzIFBhaW50XHJcbiAqL1xyXG52YXIgUGFpbnQgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoKSB7XHJcbiAgICBmdW5jdGlvbiBQYWludChjYW52YXMpIHtcclxuICAgICAgICB0aGlzLmNhbnZhcyA9IGNhbnZhcztcclxuICAgICAgICB0aGlzLmNvbnRleHQgPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcclxuICAgIH1cclxuICAgIC8qKlxyXG4gICAgICog55S754K5XHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtQb2ludFtdfSBwb2ludHNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBsaW5lV2lkdGhcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxyXG4gICAgICogQG1lbWJlcm9mIFBhaW50XHJcbiAgICAgKi9cclxuICAgIFBhaW50LnByb3RvdHlwZS5kcmF3UG9pbnQgPSBmdW5jdGlvbiAocG9pbnRzLCBsaW5lV2lkdGgsIGNvbG9yKSB7XHJcbiAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBwb2ludHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgICAgICBpZiAocG9pbnRzW2ldLnkgJiYgaSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lm1vdmVUbyhwb2ludHNbaSAtIDFdLngsIHBvaW50c1tpIC0gMV0ueSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQubW92ZVRvKHBvaW50c1tpXS54IC0gMSwgcG9pbnRzW2ldLnkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRleHQubGluZVRvKHBvaW50c1tpXS54LCBwb2ludHNbaV0ueSk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIOeUu+akreWchlxyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB4XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0geVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGFcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBiXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGluZVdpZHRoXHJcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gY29sb3JcclxuICAgICAqIEBtZW1iZXJvZiBQYWludFxyXG4gICAgICovXHJcbiAgICBQYWludC5wcm90b3R5cGUuZHJhd0VsbGlwc2UgPSBmdW5jdGlvbiAoeCwgeSwgYSwgYiwgbGluZVdpZHRoLCBjb2xvcikge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuZWxsaXBzZSh4LCB5LCBhLCBiLCAwLCAwLCAyICogTWF0aC5QSSk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVXaWR0aCA9IGxpbmVXaWR0aDtcclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gJ3JnYmEoMCwgMCwgMCwgMCknO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5maWxsKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgfTtcclxuICAgIFBhaW50LnByb3RvdHlwZS5jcmVhdGVSZWN0ID0gZnVuY3Rpb24gKHgsIHksIHdpZHRoLCBoZWlnaHQsIHJhZGl1cywgY29sb3IsIHR5cGUsIGxpbmVXaWR0aCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQubW92ZVRvKHgsIHkgKyByYWRpdXMpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8oeCwgeSArIGhlaWdodCAtIHJhZGl1cyk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSArIGhlaWdodCwgeCArIHJhZGl1cywgeSArIGhlaWdodCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVUbyh4ICsgd2lkdGggLSByYWRpdXMsIHkgKyBoZWlnaHQpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5xdWFkcmF0aWNDdXJ2ZVRvKHggKyB3aWR0aCwgeSArIGhlaWdodCwgeCArIHdpZHRoLCB5ICsgaGVpZ2h0IC0gcmFkaXVzKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQubGluZVRvKHggKyB3aWR0aCwgeSArIHJhZGl1cyk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCArIHdpZHRoLCB5LCB4ICsgd2lkdGggLSByYWRpdXMsIHkpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8oeCArIHJhZGl1cywgeSk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LnF1YWRyYXRpY0N1cnZlVG8oeCwgeSwgeCwgeSArIHJhZGl1cyk7XHJcbiAgICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgICAgIHRoaXMuY29udGV4dFt0eXBlICsgJ1N0eWxlJ10gPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmNvbnRleHQubGluZVdpZHRoID0gbGluZVdpZHRoO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbG9zZVBhdGgoKTtcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgdGhpcy5jb250ZXh0W3R5cGVdKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiDnlLvnqbrlv4Pnn6nlvaJcclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSB5XHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gd2lkdGhcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBoZWlnaHRcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSByYWRpdXNcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IGxpbmVXaWR0aFxyXG4gICAgICogQG1lbWJlcm9mIFBhaW50XHJcbiAgICAgKi9cclxuICAgIFBhaW50LnByb3RvdHlwZS5kcmF3UmVjdCA9IGZ1bmN0aW9uICh4LCB5LCB3aWR0aCwgaGVpZ2h0LCByYWRpdXMsIGNvbG9yLCBsaW5lV2lkdGgpIHtcclxuICAgICAgICB0aGlzLmNyZWF0ZVJlY3QoeCwgeSwgd2lkdGgsIGhlaWdodCwgcmFkaXVzLCBjb2xvciwgJ3N0cm9rZScsIGxpbmVXaWR0aCk7XHJcbiAgICB9O1xyXG4gICAgUGFpbnQucHJvdG90eXBlLmFycm93Q29vcmQgPSBmdW5jdGlvbiAoYmVnaW5Qb2ludCwgc3RvcFBvaW50LCByYW5nZSkge1xyXG4gICAgICAgIHZhciBwb2x5Z29uVmVydGV4ID0gW107XHJcbiAgICAgICAgcG9seWdvblZlcnRleFswXSA9IGJlZ2luUG9pbnQueDtcclxuICAgICAgICBwb2x5Z29uVmVydGV4WzFdID0gYmVnaW5Qb2ludC55O1xyXG4gICAgICAgIHBvbHlnb25WZXJ0ZXhbNl0gPSBzdG9wUG9pbnQueDtcclxuICAgICAgICBwb2x5Z29uVmVydGV4WzddID0gc3RvcFBvaW50Lnk7XHJcbiAgICAgICAgLy8g6I635Y+W5byn5bqmXHJcbiAgICAgICAgdmFyIGFuZ2xlID0gTWF0aC5hdGFuMihzdG9wUG9pbnQueSAtIGJlZ2luUG9pbnQueSwgc3RvcFBvaW50LnggLSBiZWdpblBvaW50LngpIC8gTWF0aC5QSSAqIDE4MDtcclxuICAgICAgICBwb2x5Z29uVmVydGV4WzhdID0gc3RvcFBvaW50LnggLSBQYWludC5lZGdlTGVuICogTWF0aC5jb3MoTWF0aC5QSSAvIDE4MCAqIChhbmdsZSArIHJhbmdlKSk7XHJcbiAgICAgICAgcG9seWdvblZlcnRleFs5XSA9IHN0b3BQb2ludC55IC0gUGFpbnQuZWRnZUxlbiAqIE1hdGguc2luKE1hdGguUEkgLyAxODAgKiAoYW5nbGUgKyByYW5nZSkpO1xyXG4gICAgICAgIHBvbHlnb25WZXJ0ZXhbNF0gPSBzdG9wUG9pbnQueCAtIFBhaW50LmVkZ2VMZW4gKiBNYXRoLmNvcyhNYXRoLlBJIC8gMTgwICogKGFuZ2xlIC0gcmFuZ2UpKTtcclxuICAgICAgICBwb2x5Z29uVmVydGV4WzVdID0gc3RvcFBvaW50LnkgLSBQYWludC5lZGdlTGVuICogTWF0aC5zaW4oTWF0aC5QSSAvIDE4MCAqIChhbmdsZSAtIHJhbmdlKSk7XHJcbiAgICAgICAgcmV0dXJuIHBvbHlnb25WZXJ0ZXg7XHJcbiAgICB9O1xyXG4gICAgUGFpbnQucHJvdG90eXBlLnNpZGVDb29yZCA9IGZ1bmN0aW9uIChwb2x5Z29uVmVydGV4KSB7XHJcbiAgICAgICAgdmFyIHggPSAocG9seWdvblZlcnRleFs0XSArIHBvbHlnb25WZXJ0ZXhbOF0pIC8gMjtcclxuICAgICAgICB2YXIgeSA9IChwb2x5Z29uVmVydGV4WzVdICsgcG9seWdvblZlcnRleFs5XSkgLyAyO1xyXG4gICAgICAgIHZhciBtaWRQb2ludCA9IG5ldyBQb2ludF8xLmRlZmF1bHQoeCwgeSk7XHJcbiAgICAgICAgcG9seWdvblZlcnRleFsyXSA9IChwb2x5Z29uVmVydGV4WzRdICsgbWlkUG9pbnQueCkgLyAyO1xyXG4gICAgICAgIHBvbHlnb25WZXJ0ZXhbM10gPSAocG9seWdvblZlcnRleFs1XSArIG1pZFBvaW50LnkpIC8gMjtcclxuICAgICAgICBwb2x5Z29uVmVydGV4WzEwXSA9IChwb2x5Z29uVmVydGV4WzhdICsgbWlkUG9pbnQueCkgLyAyO1xyXG4gICAgICAgIHBvbHlnb25WZXJ0ZXhbMTFdID0gKHBvbHlnb25WZXJ0ZXhbOV0gKyBtaWRQb2ludC55KSAvIDI7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiDnlLvnrq3lpLRcclxuICAgICAqXHJcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBiZWdpblBvaW50XHJcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBzdG9wUG9pbnRcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBjb2xvclxyXG4gICAgICogQHBhcmFtIHtudW1iZXJ9IHJhbmdlXHJcbiAgICAgKiBAbWVtYmVyb2YgUGFpbnRcclxuICAgICAqL1xyXG4gICAgUGFpbnQucHJvdG90eXBlLmRyYXdBcnJvdyA9IGZ1bmN0aW9uIChiZWdpblBvaW50LCBzdG9wUG9pbnQsIGNvbG9yLCByYW5nZSkge1xyXG4gICAgICAgIHZhciBwb2x5Z29uVmVydGV4ID0gdGhpcy5hcnJvd0Nvb3JkKGJlZ2luUG9pbnQsIHN0b3BQb2ludCwgcmFuZ2UpO1xyXG4gICAgICAgIHRoaXMuc2lkZUNvb3JkKHBvbHlnb25WZXJ0ZXgpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5maWxsU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmNvbnRleHQuYmVnaW5QYXRoKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0Lm1vdmVUbyhwb2x5Z29uVmVydGV4WzBdLCBwb2x5Z29uVmVydGV4WzFdKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQubGluZVRvKHBvbHlnb25WZXJ0ZXhbMl0sIHBvbHlnb25WZXJ0ZXhbM10pO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8ocG9seWdvblZlcnRleFs0XSwgcG9seWdvblZlcnRleFs1XSk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVUbyhwb2x5Z29uVmVydGV4WzZdLCBwb2x5Z29uVmVydGV4WzddKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQubGluZVRvKHBvbHlnb25WZXJ0ZXhbOF0sIHBvbHlnb25WZXJ0ZXhbOV0pO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8ocG9seWdvblZlcnRleFsxMF0sIHBvbHlnb25WZXJ0ZXhbMTFdKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGwoKTtcclxuICAgIH07XHJcbiAgICAvKipcclxuICAgICAqIOe7mOWItuebtOe6v1xyXG4gICAgICpcclxuICAgICAqIEBwYXJhbSB7UG9pbnR9IGJlZ2luUG9pbnRcclxuICAgICAqIEBwYXJhbSB7UG9pbnR9IHN0b3BQb2ludFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGluZVdpZHRoXHJcbiAgICAgKiBAbWVtYmVyb2YgUGFpbnRcclxuICAgICAqL1xyXG4gICAgUGFpbnQucHJvdG90eXBlLmRyYXdMaW5lID0gZnVuY3Rpb24gKGJlZ2luUG9pbnQsIHN0b3BQb2ludCwgY29sb3IsIGxpbmVXaWR0aCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5iZWdpblBhdGgoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuc3Ryb2tlU3R5bGUgPSBjb2xvcjtcclxuICAgICAgICB0aGlzLmNvbnRleHQubGluZVdpZHRoID0gbGluZVdpZHRoO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5tb3ZlVG8oYmVnaW5Qb2ludC54LCBiZWdpblBvaW50LnkpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8oc3RvcFBvaW50LngsIHN0b3BQb2ludC55KTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LnN0cm9rZSgpO1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICog55S75LiJ6KeS5b2iXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHtQb2ludH0gdG9wXHJcbiAgICAgKiBAcGFyYW0ge1BvaW50fSBsZWZ0XHJcbiAgICAgKiBAcGFyYW0ge1BvaW50fSByaWdodFxyXG4gICAgICogQHBhcmFtIHtzdHJpbmd9IGNvbG9yXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gbGluZVdpZHRoXHJcbiAgICAgKiBAbWVtYmVyb2YgUGFpbnRcclxuICAgICAqL1xyXG4gICAgUGFpbnQucHJvdG90eXBlLmRyYXdUcmlhbmdsZSA9IGZ1bmN0aW9uICh0b3AsIGxlZnQsIHJpZ2h0LCBjb2xvciwgbGluZVdpZHRoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5zdHJva2VTdHlsZSA9IGNvbG9yO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lV2lkdGggPSBsaW5lV2lkdGg7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0Lm1vdmVUbyh0b3AueCwgdG9wLnkpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5saW5lVG8ocmlnaHQueCwgcmlnaHQueSk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmxpbmVUbyhsZWZ0LngsIGxlZnQueSk7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmNsb3NlUGF0aCgpO1xyXG4gICAgfTtcclxuICAgIFBhaW50LnByb3RvdHlwZS5kcmF3VHJpYW5nbGUyID0gZnVuY3Rpb24gKGJlZ2luUG9pbnQsIHN0b3BQb2ludCkge1xyXG4gICAgfTtcclxuICAgIC8qKlxyXG4gICAgICog57uY5Yi26byg5qCH57uY5Zu+54K5XHJcbiAgICAgKiBAcGFyYW0geFxyXG4gICAgICogQHBhcmFtIHlcclxuICAgICAqIEBwYXJhbSByYWRpdXNcclxuICAgICAqIEBwYXJhbSBjb2xvclxyXG4gICAgICovXHJcbiAgICBQYWludC5wcm90b3R5cGUuZHJhd0ZpbGxlZENpcmNsZSA9IGZ1bmN0aW9uICh4LCB5LCByYWRpdXMsIGNvbG9yKSB7XHJcbiAgICAgICAgaWYgKHJhZGl1cyA9PT0gdm9pZCAwKSB7IHJhZGl1cyA9IDU7IH1cclxuICAgICAgICBpZiAoY29sb3IgPT09IHZvaWQgMCkgeyBjb2xvciA9ICdyZWQnOyB9XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmJlZ2luUGF0aCgpO1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5hcmMoeCwgeSwgcmFkaXVzLCAwICogTWF0aC5QSSwgMiAqIE1hdGguUEksIGZhbHNlKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuZmlsbFN0eWxlID0gY29sb3I7XHJcbiAgICAgICAgdGhpcy5jb250ZXh0LmZpbGwoKTtcclxuICAgICAgICB0aGlzLmNvbnRleHQuY2xvc2VQYXRoKCk7XHJcbiAgICB9O1xyXG4gICAgLyoqXHJcbiAgICAgKiDmuIXnqbrnlLvmnb9cclxuICAgICAqXHJcbiAgICAgKiBAbWVtYmVyb2YgUGFpbnRcclxuICAgICAqL1xyXG4gICAgUGFpbnQucHJvdG90eXBlLmNsZWFuID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRoaXMuY29udGV4dC5jbGVhclJlY3QoMCwgMCwgdGhpcy5jYW52YXMud2lkdGgsIHRoaXMuY2FudmFzLmhlaWdodCk7XHJcbiAgICB9O1xyXG4gICAgUGFpbnQuZWRnZUxlbiA9IDI1O1xyXG4gICAgUGFpbnQuYW5nbGUgPSAxNTtcclxuICAgIHJldHVybiBQYWludDtcclxufSgpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gUGFpbnQ7XHJcblxuXG5cbi8vLy8vLy8vLy8vLy8vLy8vL1xuLy8gV0VCUEFDSyBGT09URVJcbi8vIC4vc3JjL1BhaW50LnRzXG4vLyBtb2R1bGUgaWQgPSA0XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2hhcGVCYXNlXzEgPSByZXF1aXJlKFwiLi9TaGFwZUJhc2VcIik7XHJcbnZhciBUeXBlc18xID0gcmVxdWlyZShcIi4vVHlwZXNcIik7XHJcbi8qKlxyXG4gKiDlnIZcclxuICpcclxuICogQGNsYXNzIENpcmNsZVxyXG4gKiBAZXh0ZW5kcyB7U2hhcGVCYXNlfVxyXG4gKi9cclxudmFyIENpcmNsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDaXJjbGUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBDaXJjbGUoeCwgeSwgYSwgYiwgY29sb3IsIGxpbmVXaWR0aCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbG9yLCBsaW5lV2lkdGgsIFR5cGVzXzEuU2hhcGVUeXBlLkNpcmNsZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy54ID0geDtcclxuICAgICAgICBfdGhpcy55ID0geTtcclxuICAgICAgICBfdGhpcy5hID0gYTtcclxuICAgICAgICBfdGhpcy5iID0gYjtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQ2lyY2xlO1xyXG59KFNoYXBlQmFzZV8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gQ2lyY2xlO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9zaGFwZXMvQ2lyY2xlLnRzXG4vLyBtb2R1bGUgaWQgPSA1XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2hhcGVCYXNlXzEgPSByZXF1aXJlKFwiLi9TaGFwZUJhc2VcIik7XHJcbnZhciBUeXBlc18xID0gcmVxdWlyZShcIi4vVHlwZXNcIik7XHJcbi8qKlxyXG4gKiDnn6nlvaJcclxuICpcclxuICogQGNsYXNzIFJlY3RhbmdsZVxyXG4gKiBAZXh0ZW5kcyB7U2hhcGVCYXNlfVxyXG4gKi9cclxudmFyIFJlY3RhbmdsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhSZWN0YW5nbGUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBSZWN0YW5nbGUoeCwgeSwgd2lkdGgsIGhlaWdodCwgcmFkaXVzLCBjb2xvciwgbGluZVdpZHRoKSB7XHJcbiAgICAgICAgaWYgKHggPT09IHZvaWQgMCkgeyB4ID0gMDsgfVxyXG4gICAgICAgIGlmICh5ID09PSB2b2lkIDApIHsgeSA9IDA7IH1cclxuICAgICAgICBpZiAod2lkdGggPT09IHZvaWQgMCkgeyB3aWR0aCA9IDA7IH1cclxuICAgICAgICBpZiAoaGVpZ2h0ID09PSB2b2lkIDApIHsgaGVpZ2h0ID0gMDsgfVxyXG4gICAgICAgIGlmIChyYWRpdXMgPT09IHZvaWQgMCkgeyByYWRpdXMgPSAwOyB9XHJcbiAgICAgICAgaWYgKGNvbG9yID09PSB2b2lkIDApIHsgY29sb3IgPSAnJzsgfVxyXG4gICAgICAgIGlmIChsaW5lV2lkdGggPT09IHZvaWQgMCkgeyBsaW5lV2lkdGggPSAwOyB9XHJcbiAgICAgICAgdmFyIF90aGlzID0gX3N1cGVyLmNhbGwodGhpcywgY29sb3IsIGxpbmVXaWR0aCwgVHlwZXNfMS5TaGFwZVR5cGUuUmVjdGFuZ2xlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnggPSB4O1xyXG4gICAgICAgIF90aGlzLnkgPSB5O1xyXG4gICAgICAgIF90aGlzLndpZHRoID0gd2lkdGg7XHJcbiAgICAgICAgX3RoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xyXG4gICAgICAgIF90aGlzLnJhZGl1cyA9IHJhZGl1cztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gUmVjdGFuZ2xlO1xyXG59KFNoYXBlQmFzZV8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gUmVjdGFuZ2xlO1xyXG5cblxuXG4vLy8vLy8vLy8vLy8vLy8vLy9cbi8vIFdFQlBBQ0sgRk9PVEVSXG4vLyAuL3NyYy9zaGFwZXMvUmVjdGFuZ2xlLnRzXG4vLyBtb2R1bGUgaWQgPSA2XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2hhcGVCYXNlXzEgPSByZXF1aXJlKFwiLi9TaGFwZUJhc2VcIik7XHJcbnZhciBUeXBlc18xID0gcmVxdWlyZShcIi4vVHlwZXNcIik7XHJcbi8qKlxyXG4gKiDmm7Lnur8o6Ieq55Sx5YiS57q/KVxyXG4gKlxyXG4gKiBAY2xhc3MgQ3VydmVcclxuICogQGV4dGVuZHMge1NoYXBlQmFzZX1cclxuICovXHJcbnZhciBDdXJ2ZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhDdXJ2ZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIEN1cnZlKHBvaW50cywgY29sb3IsIGxpbmVXaWR0aCkge1xyXG4gICAgICAgIHZhciBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGNvbG9yLCBsaW5lV2lkdGgsIFR5cGVzXzEuU2hhcGVUeXBlLkN1cnZlKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLnBvaW50cyA9IHBvaW50cztcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQ3VydmU7XHJcbn0oU2hhcGVCYXNlXzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBDdXJ2ZTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc2hhcGVzL0N1cnZlLnRzXG4vLyBtb2R1bGUgaWQgPSA3XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2hhcGVCYXNlXzEgPSByZXF1aXJlKFwiLi9TaGFwZUJhc2VcIik7XHJcbnZhciBUeXBlc18xID0gcmVxdWlyZShcIi4vVHlwZXNcIik7XHJcbi8qKlxyXG4gKiDnrq3lpLRcclxuICpcclxuICogQGNsYXNzIEFycm93XHJcbiAqIEBleHRlbmRzIHtTaGFwZUJhc2V9XHJcbiAqL1xyXG52YXIgQXJyb3cgPSAvKiogQGNsYXNzICovIChmdW5jdGlvbiAoX3N1cGVyKSB7XHJcbiAgICBfX2V4dGVuZHMoQXJyb3csIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBBcnJvdyhiZWdpblBvaW50LCBzdG9wUG9pbnQsIHJhbmdlLCBjb2xvciwgbGluZVdpZHRoKSB7XHJcbiAgICAgICAgaWYgKGxpbmVXaWR0aCA9PT0gdm9pZCAwKSB7IGxpbmVXaWR0aCA9IDA7IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb2xvciwgbGluZVdpZHRoLCBUeXBlc18xLlNoYXBlVHlwZS5BcnJvdykgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy5iZWdpblBvaW50ID0gYmVnaW5Qb2ludDtcclxuICAgICAgICBfdGhpcy5zdG9wUG9pbnQgPSBzdG9wUG9pbnQ7XHJcbiAgICAgICAgX3RoaXMucmFuZ2UgPSByYW5nZTtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gQXJyb3c7XHJcbn0oU2hhcGVCYXNlXzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBBcnJvdztcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc2hhcGVzL0Fycm93LnRzXG4vLyBtb2R1bGUgaWQgPSA4XG4vLyBtb2R1bGUgY2h1bmtzID0gMCIsIlwidXNlIHN0cmljdFwiO1xyXG52YXIgX19leHRlbmRzID0gKHRoaXMgJiYgdGhpcy5fX2V4dGVuZHMpIHx8IChmdW5jdGlvbiAoKSB7XHJcbiAgICB2YXIgZXh0ZW5kU3RhdGljcyA9IE9iamVjdC5zZXRQcm90b3R5cGVPZiB8fFxyXG4gICAgICAgICh7IF9fcHJvdG9fXzogW10gfSBpbnN0YW5jZW9mIEFycmF5ICYmIGZ1bmN0aW9uIChkLCBiKSB7IGQuX19wcm90b19fID0gYjsgfSkgfHxcclxuICAgICAgICBmdW5jdGlvbiAoZCwgYikgeyBmb3IgKHZhciBwIGluIGIpIGlmIChiLmhhc093blByb3BlcnR5KHApKSBkW3BdID0gYltwXTsgfTtcclxuICAgIHJldHVybiBmdW5jdGlvbiAoZCwgYikge1xyXG4gICAgICAgIGV4dGVuZFN0YXRpY3MoZCwgYik7XHJcbiAgICAgICAgZnVuY3Rpb24gX18oKSB7IHRoaXMuY29uc3RydWN0b3IgPSBkOyB9XHJcbiAgICAgICAgZC5wcm90b3R5cGUgPSBiID09PSBudWxsID8gT2JqZWN0LmNyZWF0ZShiKSA6IChfXy5wcm90b3R5cGUgPSBiLnByb3RvdHlwZSwgbmV3IF9fKCkpO1xyXG4gICAgfTtcclxufSkoKTtcclxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFwiX19lc01vZHVsZVwiLCB7IHZhbHVlOiB0cnVlIH0pO1xyXG52YXIgU2hhcGVCYXNlXzEgPSByZXF1aXJlKFwiLi9TaGFwZUJhc2VcIik7XHJcbnZhciBUeXBlc18xID0gcmVxdWlyZShcIi4vVHlwZXNcIik7XHJcbi8qKlxyXG4gKiDnm7Tnur9cclxuICpcclxuICogQGNsYXNzIExpbmVcclxuICogQGV4dGVuZHMge1NoYXBlQmFzZX1cclxuICovXHJcbnZhciBMaW5lID0gLyoqIEBjbGFzcyAqLyAoZnVuY3Rpb24gKF9zdXBlcikge1xyXG4gICAgX19leHRlbmRzKExpbmUsIF9zdXBlcik7XHJcbiAgICBmdW5jdGlvbiBMaW5lKGJlZ2luLCBlbmQsIGNvbG9yLCBsaW5lV2lkdGgpIHtcclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb2xvciwgbGluZVdpZHRoLCBUeXBlc18xLlNoYXBlVHlwZS5MaW5lKSB8fCB0aGlzO1xyXG4gICAgICAgIF90aGlzLmJlZ2luID0gYmVnaW47XHJcbiAgICAgICAgX3RoaXMuZW5kID0gZW5kO1xyXG4gICAgICAgIHJldHVybiBfdGhpcztcclxuICAgIH1cclxuICAgIHJldHVybiBMaW5lO1xyXG59KFNoYXBlQmFzZV8xLmRlZmF1bHQpKTtcclxuZXhwb3J0cy5kZWZhdWx0ID0gTGluZTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc2hhcGVzL0xpbmUudHNcbi8vIG1vZHVsZSBpZCA9IDlcbi8vIG1vZHVsZSBjaHVua3MgPSAwIiwiXCJ1c2Ugc3RyaWN0XCI7XHJcbnZhciBfX2V4dGVuZHMgPSAodGhpcyAmJiB0aGlzLl9fZXh0ZW5kcykgfHwgKGZ1bmN0aW9uICgpIHtcclxuICAgIHZhciBleHRlbmRTdGF0aWNzID0gT2JqZWN0LnNldFByb3RvdHlwZU9mIHx8XHJcbiAgICAgICAgKHsgX19wcm90b19fOiBbXSB9IGluc3RhbmNlb2YgQXJyYXkgJiYgZnVuY3Rpb24gKGQsIGIpIHsgZC5fX3Byb3RvX18gPSBiOyB9KSB8fFxyXG4gICAgICAgIGZ1bmN0aW9uIChkLCBiKSB7IGZvciAodmFyIHAgaW4gYikgaWYgKGIuaGFzT3duUHJvcGVydHkocCkpIGRbcF0gPSBiW3BdOyB9O1xyXG4gICAgcmV0dXJuIGZ1bmN0aW9uIChkLCBiKSB7XHJcbiAgICAgICAgZXh0ZW5kU3RhdGljcyhkLCBiKTtcclxuICAgICAgICBmdW5jdGlvbiBfXygpIHsgdGhpcy5jb25zdHJ1Y3RvciA9IGQ7IH1cclxuICAgICAgICBkLnByb3RvdHlwZSA9IGIgPT09IG51bGwgPyBPYmplY3QuY3JlYXRlKGIpIDogKF9fLnByb3RvdHlwZSA9IGIucHJvdG90eXBlLCBuZXcgX18oKSk7XHJcbiAgICB9O1xyXG59KSgpO1xyXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgXCJfX2VzTW9kdWxlXCIsIHsgdmFsdWU6IHRydWUgfSk7XHJcbnZhciBTaGFwZUJhc2VfMSA9IHJlcXVpcmUoXCIuL1NoYXBlQmFzZVwiKTtcclxudmFyIFBvaW50XzEgPSByZXF1aXJlKFwiLi9Qb2ludFwiKTtcclxudmFyIFR5cGVzXzEgPSByZXF1aXJlKFwiLi9UeXBlc1wiKTtcclxuLyoqXHJcbiAqIOS4ieinkuW9olxyXG4gKlxyXG4gKiBAY2xhc3MgVHJpYW5nbGVcclxuICogQGV4dGVuZHMge1NoYXBlQmFzZX1cclxuICovXHJcbnZhciBUcmlhbmdsZSA9IC8qKiBAY2xhc3MgKi8gKGZ1bmN0aW9uIChfc3VwZXIpIHtcclxuICAgIF9fZXh0ZW5kcyhUcmlhbmdsZSwgX3N1cGVyKTtcclxuICAgIGZ1bmN0aW9uIFRyaWFuZ2xlKHRvcCwgbGVmdCwgcmlnaHQsIGNvbG9yLCBsaW5lV2lkdGgpIHtcclxuICAgICAgICBpZiAodG9wID09PSB2b2lkIDApIHsgdG9wID0gbmV3IFBvaW50XzEuZGVmYXVsdCgpOyB9XHJcbiAgICAgICAgaWYgKGxlZnQgPT09IHZvaWQgMCkgeyBsZWZ0ID0gbmV3IFBvaW50XzEuZGVmYXVsdCgpOyB9XHJcbiAgICAgICAgaWYgKHJpZ2h0ID09PSB2b2lkIDApIHsgcmlnaHQgPSBuZXcgUG9pbnRfMS5kZWZhdWx0KCk7IH1cclxuICAgICAgICBpZiAoY29sb3IgPT09IHZvaWQgMCkgeyBjb2xvciA9ICcnOyB9XHJcbiAgICAgICAgaWYgKGxpbmVXaWR0aCA9PT0gdm9pZCAwKSB7IGxpbmVXaWR0aCA9IDA7IH1cclxuICAgICAgICB2YXIgX3RoaXMgPSBfc3VwZXIuY2FsbCh0aGlzLCBjb2xvciwgbGluZVdpZHRoLCBUeXBlc18xLlNoYXBlVHlwZS5UcmlhbmdsZSkgfHwgdGhpcztcclxuICAgICAgICBfdGhpcy50b3BQb2ludCA9IHRvcDtcclxuICAgICAgICBfdGhpcy5sZWZ0UG9pbnQgPSBsZWZ0O1xyXG4gICAgICAgIF90aGlzLnJpZ2h0UG9pbnQgPSByaWdodDtcclxuICAgICAgICByZXR1cm4gX3RoaXM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gVHJpYW5nbGU7XHJcbn0oU2hhcGVCYXNlXzEuZGVmYXVsdCkpO1xyXG5leHBvcnRzLmRlZmF1bHQgPSBUcmlhbmdsZTtcclxuXG5cblxuLy8vLy8vLy8vLy8vLy8vLy8vXG4vLyBXRUJQQUNLIEZPT1RFUlxuLy8gLi9zcmMvc2hhcGVzL1RyaWFuZ2xlLnRzXG4vLyBtb2R1bGUgaWQgPSAxMFxuLy8gbW9kdWxlIGNodW5rcyA9IDAiXSwic291cmNlUm9vdCI6IiJ9